# PyFlare Production Environment Configuration
# =============================================
# SECURITY: Copy this file to .env.prod and configure all credentials.
# All credentials in this file are REQUIRED for production.
# NEVER commit .env.prod to version control.
#
# Usage:
#   cp .env.prod.example .env.prod
#   # Generate secure credentials (see commands below)
#   # Edit .env.prod with your values
#   docker-compose -f docker-compose.prod.yml --env-file .env.prod up -d

# =============================================================================
# REQUIRED Credentials - Generate secure values for all of these
# =============================================================================

# ClickHouse database password
# Generate with: openssl rand -base64 32
CLICKHOUSE_PASSWORD=

# Redis password
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=

# Qdrant API key
# Generate with: openssl rand -hex 32
QDRANT_API_KEY=

# Kafka SASL credentials
# Generate username: echo "pyflare-$(openssl rand -hex 4)"
# Generate password: openssl rand -base64 32
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=

# Kafka cluster ID (generate once, don't change)
# Generate with: openssl rand -base64 22 | tr '+/' '-_'
KAFKA_CLUSTER_ID=

# PyFlare API master key for admin access
# Generate with: openssl rand -hex 32
PYFLARE_API_MASTER_KEY=

# =============================================================================
# TLS Configuration (REQUIRED for production)
# =============================================================================

# Enable TLS for collector endpoints
PYFLARE_TLS_ENABLED=true

# Path to TLS certificate (inside container)
PYFLARE_TLS_CERT_PATH=/app/certs/server.crt

# Path to TLS private key (inside container)
PYFLARE_TLS_KEY_PATH=/app/certs/server.key

# Host path to certificates directory (mounted to container)
PYFLARE_TLS_CERT_HOST_PATH=./certs

# =============================================================================
# Service Configuration
# =============================================================================

# PyFlare log level (trace, debug, info, warn, error)
PYFLARE_LOG_LEVEL=info

# ClickHouse database name and user
CLICKHOUSE_DB=pyflare
CLICKHOUSE_USER=pyflare

# API URL for UI (adjust for your deployment)
PYFLARE_API_URL=https://api.your-domain.com/api/v1

# Allowed CORS origins (comma-separated, or empty for same-origin only)
# Example: https://your-domain.com,https://www.your-domain.com
PYFLARE_API_ALLOWED_ORIGINS=

# =============================================================================
# Quick Setup Commands
# =============================================================================
# Run these commands to generate all required credentials:
#
# echo "CLICKHOUSE_PASSWORD=$(openssl rand -base64 32)"
# echo "REDIS_PASSWORD=$(openssl rand -base64 32)"
# echo "QDRANT_API_KEY=$(openssl rand -hex 32)"
# echo "KAFKA_SASL_USERNAME=pyflare-$(openssl rand -hex 4)"
# echo "KAFKA_SASL_PASSWORD=$(openssl rand -base64 32)"
# echo "KAFKA_CLUSTER_ID=$(openssl rand -base64 22 | tr '+/' '-_')"
# echo "PYFLARE_API_MASTER_KEY=$(openssl rand -hex 32)"
#
# =============================================================================
# Security Checklist
# =============================================================================
# [ ] All passwords are unique and randomly generated
# [ ] TLS certificates are valid and from a trusted CA
# [ ] Firewall restricts access to service ports
# [ ] Network is isolated (use private subnet)
# [ ] Backup encryption keys are stored securely
# [ ] Monitoring and alerting is configured
# [ ] Regular security updates are scheduled
